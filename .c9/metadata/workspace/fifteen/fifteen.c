{"changed":false,"filter":false,"title":"fifteen.c","tooltip":"/fifteen/fifteen.c","value":"/**\n * fifteen.c\n *\n * Implements Game of Fifteen (generalized to d x d).\n *\n * Usage: fifteen d\n *\n * whereby the board's dimensions are to be d x d,\n * where d must be in [DIM_MIN,DIM_MAX]\n *\n * Note that usleep is obsolete, but it offers more granularity than\n * sleep and is simpler to use than nanosleep; `man usleep` for more.\n */\n \n#define _XOPEN_SOURCE 500\n\n#include <cs50.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <unistd.h>\n\n// constants\n#define DIM_MIN 3\n#define DIM_MAX 9\n\n// board\nint board[DIM_MAX][DIM_MAX];\n\n// dimensions\nint d;\n\n// prototypes\nvoid clear(void);\nvoid greet(void);\nvoid init(void);\nvoid draw(void);\nbool move(int tile);\nbool won(void);\n\nint main(int argc, string argv[])\n{\n    // ensure proper usage\n    if (argc != 2)\n    {\n        printf(\"Usage: fifteen d\\n\");\n        return 1;\n    }\n\n    // ensure valid dimensions\n    d = atoi(argv[1]);\n    if (d < DIM_MIN || d > DIM_MAX)\n    {\n        printf(\"Board must be between %i x %i and %i x %i, inclusive.\\n\",\n            DIM_MIN, DIM_MIN, DIM_MAX, DIM_MAX);\n        return 2;\n    }\n\n    // open log\n    FILE *file = fopen(\"log.txt\", \"w\");\n    if (file == NULL)\n    {\n        return 3;\n    }\n\n    // greet user with instructions\n    greet();\n\n    // initialize the board\n    init();\n\n    // accept moves until game is won\n    while (true)\n    {\n        // clear the screen\n        clear();\n\n        // draw the current state of the board\n        draw();\n\n        // log the current state of the board (for testing)\n        for (int i = 0; i < d; i++)\n        {\n            for (int j = 0; j < d; j++)\n            {\n                fprintf(file, \"%i\", board[i][j]);\n                if (j < d - 1)\n                {\n                    fprintf(file, \"|\");\n                }\n            }\n            fprintf(file, \"\\n\");\n        }\n        fflush(file);\n\n        // check for win\n        if (won())\n        {\n            printf(\"ftw!\\n\");\n            break;\n        }\n\n        // prompt for move\n        printf(\"Tile to move: \");\n        int tile = get_int();\n        \n        // quit if user inputs 0 (for testing)\n        if (tile == 0)\n        {\n            break;\n        }\n\n        // log move (for testing)\n        fprintf(file, \"%i\\n\", tile);\n        fflush(file);\n\n        // move if possible, else report illegality\n        if (!move(tile))\n        {\n            printf(\"\\nIllegal move.\\n\");\n            usleep(500000);\n        }\n\n        // sleep thread for animation's sake\n        usleep(500000);\n    }\n    \n    // close log\n    fclose(file);\n\n    // success\n    return 0;\n}\n\n/**\n * Clears screen using ANSI escape sequences.\n */\nvoid clear(void)\n{\n    printf(\"\\033[2J\");\n    printf(\"\\033[%d;%dH\", 0, 0);\n}\n\n/**\n * Greets player.\n */\nvoid greet(void)\n{\n    clear();\n    printf(\"WELCOME TO GAME OF FIFTEEN\\n\");\n    usleep(2000000);\n}\n\n/**\n * Initializes the game's board with tiles numbered 1 through d*d - 1\n * (i.e., fills 2D array with values but does not actually print them).  \n */\nvoid init(void)\n{\n    // TODO\n}\n\n/**\n * Prints the board in its current state.\n */\nvoid draw(void)\n{\n    // TODO\n}\n\n/**\n * If tile borders empty space, moves tile and returns true, else\n * returns false. \n */\nbool move(int tile)\n{\n    // TODO\n    return false;\n}\n\n/**\n * Returns true if game is won (i.e., board is in winning configuration), \n * else false.\n */\nbool won(void)\n{\n    // TODO\n    return false;\n}\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":1354.5,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":70,"state":"start","mode":"ace/mode/c_cpp"}},"timestamp":1474026726000}